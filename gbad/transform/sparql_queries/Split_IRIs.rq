PREFIX rico: <http://example.org/rico#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

DELETE {
  ?s ?p ?o .
}
INSERT {
  ?new_s ?p ?o .
}
WHERE {
  ?s ?p ?o .
  FILTER (STRSTARTS(STR(?s), "http://gbad.archives.gov.on.ca/AA") || STRSTARTS(STR(?s), "http://gbad.archives.gov.on.ca/BA") || STRSTARTS(STR(?s), "http://gbad.archives.gov.on.ca/CA"))
  BIND(IRI(REPLACE(STR(?s), "^http://gbad\\.archives\\.gov\\.on\\.ca/(AA|BA|CA)(\\d+)(/.*)?$", "http://gbad.archives.gov.on.ca/$1/$2$3")) AS ?new_s)
}
